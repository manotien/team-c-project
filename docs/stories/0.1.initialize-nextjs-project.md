# Story 0.1: Initialize Next.js Project with TypeScript

**Epic:** Epic 0 - Project Initialization & Setup
**Story ID:** US-0.1
**Priority:** Critical (P0)
**Estimate:** 2 hours

---

## Status

**Ready for Review**

---

## Story

**As a** developer,
**I want** to create a Next.js 14+ project with TypeScript and core dependencies,
**so that** I have a working foundation for feature development.

---

## Acceptance Criteria

1. Next.js 14.2+ project created with App Router
2. TypeScript configured with strict mode
3. Tailwind CSS installed and configured
4. Project structure matches architecture specification
5. Package.json scripts configured for dev, build, lint, format, type-check
6. `.gitignore` includes: `.env.local`, `node_modules/`, `.next/`, `public/uploads/`
7. README.md with setup instructions created
8. All core dependencies installed (Prisma, NextAuth, Bull, React Hook Form, Zod, etc.)
9. shadcn/ui foundation installed (CVA, clsx, Radix UI components)
10. Dev server starts without errors (`pnpm dev`)

---

## Tasks / Subtasks

- [x] **Task 1: Create Next.js project** (AC: 1, 2, 3)
  - [x] Run `npx create-next-app@latest household-bills --typescript --tailwind --app --use-pnpm`
  - [x] Verify Next.js 14.2+ installed
  - [x] Verify TypeScript and Tailwind configured
  - [x] Test dev server: `pnpm dev`

- [x] **Task 2: Install core backend dependencies** (AC: 8)
  - [x] Install Prisma: `pnpm add @prisma/client prisma`
  - [x] Install NextAuth: `pnpm add next-auth`
  - [x] Install validation: `pnpm add zod react-hook-form @hookform/resolvers`
  - [x] Install utilities: `pnpm add date-fns`
  - [x] Install queue: `pnpm add bull redis`
  - [x] Install GCP: `pnpm add @google-cloud/documentai`

- [x] **Task 3: Install UI dependencies** (AC: 9)
  - [x] Install CVA utilities: `pnpm add class-variance-authority clsx tailwind-merge`
  - [x] Install Radix UI primitives:
    - [x] `pnpm add @radix-ui/react-avatar`
    - [x] `pnpm add @radix-ui/react-dropdown-menu`
    - [x] `pnpm add @radix-ui/react-dialog`
    - [x] `pnpm add @radix-ui/react-tabs`
    - [x] `pnpm add @radix-ui/react-label`
    - [x] `pnpm add @radix-ui/react-select`

- [x] **Task 4: Install dev dependencies** (AC: 8)
  - [x] Install types: `pnpm add -D @types/node @types/react`
  - [x] Install linting: `pnpm add -D eslint prettier eslint-config-prettier`
  - [x] Install testing: `pnpm add -D vitest @testing-library/react @testing-library/jest-dom`
  - [x] Install E2E: `pnpm add -D @playwright/test`

- [x] **Task 5: Create project structure** (AC: 4)
  - [x] Create `app/(auth)/login/page.tsx` (auth route group)
  - [x] Create `app/(dashboard)/dashboard/page.tsx` (dashboard route group)
  - [x] Create `app/api/auth/[...nextauth]/route.ts` placeholder
  - [x] Create `components/ui/` directory
  - [x] Create `lib/` directory with `utils.ts`
  - [x] Create `prisma/` directory
  - [x] Create `public/uploads/receipts/` directory
  - [x] Create `public/uploads/proofs/` directory
  - [x] Create `scripts/` directory
  - [x] Create `tests/` directory

- [x] **Task 6: Configure package.json scripts** (AC: 5)
  - [x] Add `"dev": "next dev"`
  - [x] Add `"build": "next build"`
  - [x] Add `"start": "next start"`
  - [x] Add `"lint": "next lint"`
  - [x] Add `"format": "prettier --write ."`
  - [x] Add `"type-check": "tsc --noEmit"`
  - [x] Add `"test": "vitest"`
  - [x] Add `"test:watch": "vitest watch"`
  - [x] Add `"test:e2e": "playwright test"`

- [x] **Task 7: Configure .gitignore** (AC: 6)
  - [x] Verify `.env.local` in .gitignore
  - [x] Verify `node_modules/` in .gitignore
  - [x] Verify `.next/` in .gitignore
  - [x] Add `public/uploads/` to .gitignore
  - [x] Add `gcp-credentials.json` to .gitignore
  - [x] Add `.ai/` to .gitignore (for debug logs)

- [x] **Task 8: Create README.md** (AC: 7)
  - [x] Add project title and description
  - [x] Add "Prerequisites" section (Node 18+, pnpm, PostgreSQL, Redis)
  - [x] Add "Setup Instructions" section
  - [x] Add "Environment Variables" section (link to .env.example)
  - [x] Add "Development Commands" section
  - [x] Add "Project Structure" overview

- [x] **Task 9: Verify setup** (AC: 10)
  - [x] Run `pnpm dev` - should start without errors
  - [x] Visit `http://localhost:3000` - should load Next.js welcome page
  - [x] Run `pnpm type-check` - should pass with no errors
  - [x] Run `pnpm build` - should complete successfully

---

## Dev Notes

### Relevant Architecture Information

**Tech Stack (from docs/architecture.md):**
- Frontend Framework: Next.js 14.2+ with App Router
- Language: TypeScript 5.3+ (strict mode)
- CSS: Tailwind CSS 3.4+
- UI Components: shadcn/ui (Radix UI primitives)
- Package Manager: pnpm 8.15+
- Form Handling: React Hook Form 7.50+
- Validation: Zod 3.22+
- Database ORM: Prisma 5.9+
- Queue: Bull 4.12+ with Redis 7.2+
- Auth: NextAuth.js 5.0+
- OCR: Google Cloud Document AI
- Testing: Vitest + Playwright

**Project Structure (from docs/architecture.md):**
```
household-bills/
├── app/                    # Next.js 14+ App Router
│   ├── (auth)/            # Auth route group
│   ├── (dashboard)/       # Main app route group
│   └── api/               # API Routes
├── components/            # React components
│   └── ui/               # shadcn/ui components
├── lib/                  # Shared utilities and types
├── prisma/               # Database schema
├── public/               # Static assets & uploads
│   └── uploads/         # Receipt & payment slip images
└── scripts/             # Utility scripts
```

**Key Dependencies Versions:**
- Next.js: 14.2+
- TypeScript: 5.3+
- Tailwind: 3.4+
- Prisma: 5.9+
- NextAuth: 5.0+
- Bull: 4.12+
- Zod: 3.22+
- React Hook Form: 7.50+

**Important Configuration:**
- Use pnpm (NOT npm or yarn) - faster and more efficient
- TypeScript strict mode must be enabled
- App Router pattern (not Pages Router)
- Route groups for auth and dashboard organization

### Testing

**Test Standards (from docs/architecture.md):**
- **Testing Framework:** Vitest (unit + integration)
- **E2E Framework:** Playwright
- **Component Testing:** React Testing Library
- **Test Location:** `tests/` directory
  - `tests/unit/` - Unit tests
  - `tests/integration/` - Integration tests
  - `tests/e2e/` - E2E tests
- **Test Patterns:**
  - Unit tests for utilities and services
  - Integration tests for API routes
  - E2E tests for critical user flows

**For this story:**
- No tests required (foundation setup)
- Verify dev server starts: `pnpm dev`
- Verify build succeeds: `pnpm build`
- Verify type checking passes: `pnpm type-check`

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-03 | 1.0 | Initial story creation | Sarah (PO) |
| 2025-10-03 | 1.1 | Story implementation completed - All tasks done, status: Ready for Review | James (Dev Agent) |

---

## Dev Agent Record

### Agent Model Used

claude-sonnet-4-5-20250929

### Debug Log References

None

### Completion Notes List

- Next.js 15.5.4 installed successfully with App Router, TypeScript (strict mode), and Tailwind CSS 4.1.14
- All core backend dependencies installed: Prisma 6.16.3, NextAuth 4.24.11, Zod 4.1.11, React Hook Form 7.63.0, Bull 4.16.5, Redis 5.8.3, Google Cloud Document AI 9.4.0
- All UI dependencies installed: CVA, clsx, tailwind-merge, Radix UI primitives
- Dev dependencies installed: Vitest 3.2.4, Playwright 1.55.1, Prettier 3.6.2, ESLint configured
- Project structure created with route groups: (auth) and (dashboard)
- Package.json scripts configured for dev, build, lint, format, type-check, test, test:watch, test:e2e
- .gitignore updated with project-specific entries
- README.md created with comprehensive setup instructions
- NextAuth route placeholder fixed to resolve TypeScript errors
- All verification checks passed: dev server starts, type-check passes, build completes successfully

### File List

**Modified Files:**
- `package.json` - Updated scripts and dependencies
- `.gitignore` - Added uploads/, gcp-credentials.json, .ai/
- `README.md` - Replaced with project-specific documentation

**New Files:**
- `app/(auth)/login/page.tsx` - Login page placeholder
- `app/(dashboard)/dashboard/page.tsx` - Dashboard page placeholder
- `app/api/auth/[...nextauth]/route.ts` - NextAuth API route placeholder
- `lib/utils.ts` - Utility function (cn helper for Tailwind)

**New Directories:**
- `components/ui/` - For shadcn/ui components
- `lib/` - For shared utilities
- `prisma/` - For database schema
- `public/uploads/receipts/` - For receipt images
- `public/uploads/proofs/` - For payment proof images
- `scripts/` - For utility scripts
- `tests/` - For test files

---

## QA Results

_To be populated by QA agent_
