# Story 0.6: Setup Development Tooling

**Epic:** Epic 0 - Project Initialization & Setup
**Story ID:** US-0.6
**Priority:** High (P1)
**Estimate:** 1.5 hours

---

## Status

**Draft**

---

## Story

**As a** developer,
**I want** to configure linting, formatting, and testing tools,
**so that** code quality is maintained automatically.

---

## Acceptance Criteria

1. ESLint configured with Next.js + TypeScript rules
2. `pnpm lint` command works without errors
3. Prettier configured with consistent formatting rules
4. `pnpm format` command works
5. Prettier integrates with ESLint (no conflicts)
6. TypeScript strict mode enabled in `tsconfig.json`
7. `pnpm type-check` command works
8. Vitest configured for unit tests with test setup file
9. Sample test passes successfully
10. Playwright configured for E2E tests
11. Playwright browsers installed
12. Sample E2E test passes

---

## Tasks / Subtasks

- [ ] **Task 1: Configure ESLint** (AC: 1, 2)
  - [ ] Verify ESLint installed (from Story 0.1)
  - [ ] Create/update `.eslintrc.json` with Next.js config
  - [ ] Add TypeScript parser and rules
  - [ ] Run `pnpm lint` - should pass with no errors
  - [ ] Add recommended VSCode ESLint extension to `.vscode/extensions.json`

- [ ] **Task 2: Configure Prettier** (AC: 3, 4, 5)
  - [ ] Create `.prettierrc` file
  - [ ] Add formatting rules (semi, quotes, trailing comma, etc.)
  - [ ] Install `eslint-config-prettier` to avoid conflicts
  - [ ] Update `.eslintrc.json` to extend prettier config
  - [ ] Run `pnpm format` - should format files
  - [ ] Verify no ESLint/Prettier conflicts

- [ ] **Task 3: Configure TypeScript strict mode** (AC: 6, 7)
  - [ ] Open `tsconfig.json`
  - [ ] Verify `"strict": true` in compilerOptions
  - [ ] Add `"noUnused Locals": true`
  - [ ] Add `"noUnusedParameters": true`
  - [ ] Run `pnpm type-check` - should pass

- [ ] **Task 4: Configure Vitest** (AC: 8, 9)
  - [ ] Create `vitest.config.ts` file
  - [ ] Configure test environment: jsdom for React components
  - [ ] Create `tests/setup.ts` with global test setup
  - [ ] Import @testing-library/jest-dom matchers
  - [ ] Create sample test: `tests/example.test.ts`
  - [ ] Run `pnpm test` - should pass

- [ ] **Task 5: Configure Playwright** (AC: 10, 11, 12)
  - [ ] Create `playwright.config.ts` file
  - [ ] Configure baseURL: http://localhost:3000
  - [ ] Configure browsers: chromium, firefox, webkit
  - [ ] Run `pnpm exec playwright install` - install browsers
  - [ ] Create sample E2E test: `tests/e2e/example.spec.ts`
  - [ ] Run `pnpm test:e2e` - should pass

- [ ] **Task 6: Add VSCode recommendations** (optional)
  - [ ] Create `.vscode/extensions.json`
  - [ ] Add recommended extensions: ESLint, Prettier, Prisma
  - [ ] Create `.vscode/settings.json`
  - [ ] Enable format on save
  - [ ] Configure ESLint auto-fix on save

---

## Dev Notes

### ESLint Configuration (.eslintrc.json)

```json
{
  "extends": [
    "next/core-web-vitals",
    "plugin:@typescript-eslint/recommended",
    "prettier"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": ["error", { "argsIgnorePattern": "^_" }],
    "@typescript-eslint/no-explicit-any": "warn",
    "no-console": ["warn", { "allow": ["warn", "error"] }]
  }
}
```

### Prettier Configuration (.prettierrc)

```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 100,
  "arrowParens": "always"
}
```

### Vitest Configuration (vitest.config.ts)

```typescript
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    setupFiles: ['./tests/setup.ts'],
    globals: true,
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './'),
    },
  },
});
```

### Test Setup File (tests/setup.ts)

```typescript
import '@testing-library/jest-dom';
import { expect, afterEach } from 'vitest';
import { cleanup } from '@testing-library/react';

// Cleanup after each test
afterEach(() => {
  cleanup();
});
```

### Sample Unit Test (tests/example.test.ts)

```typescript
import { describe, it, expect } from 'vitest';

describe('Example Test', () => {
  it('should pass', () => {
    expect(1 + 1).toBe(2);
  });

  it('should handle strings', () => {
    expect('hello').toBe('hello');
  });
});
```

### Playwright Configuration (playwright.config.ts)

```typescript
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
  ],
  webServer: {
    command: 'pnpm dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  },
});
```

### Sample E2E Test (tests/e2e/example.spec.ts)

```typescript
import { test, expect } from '@playwright/test';

test('homepage loads', async ({ page }) => {
  await page.goto('/');
  await expect(page).toHaveTitle(/Next.js/);
});
```

### VSCode Configuration (optional)

**.vscode/extensions.json:**
```json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "prisma.prisma",
    "bradlc.vscode-tailwindcss"
  ]
}
```

**.vscode/settings.json:**
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescriptreact]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

### Testing Standards (from Architecture)

**Test Organization:**
- `tests/unit/` - Unit tests for utilities and services
- `tests/integration/` - Integration tests for API routes
- `tests/e2e/` - E2E tests for critical user flows

**Test Commands:**
- `pnpm test` - Run unit tests with Vitest
- `pnpm test:watch` - Watch mode for development
- `pnpm test:e2e` - Run E2E tests with Playwright
- `pnpm test:e2e --ui` - Open Playwright UI mode

### Verification

**ESLint:**
- `pnpm lint` should pass with no errors
- VSCode should show inline ESLint warnings

**Prettier:**
- `pnpm format` should format all files
- Files should auto-format on save in VSCode

**TypeScript:**
- `pnpm type-check` should pass with strict mode
- No type errors in VSCode

**Vitest:**
- `pnpm test` should run and pass example test
- Watch mode should work: `pnpm test:watch`

**Playwright:**
- Browsers installed successfully
- `pnpm test:e2e` should pass example test
- Playwright report generated

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-03 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

### Agent Model Used

_To be populated by dev agent_

### Debug Log References

_To be populated by dev agent_

### Completion Notes List

_To be populated by dev agent_

### File List

_To be populated by dev agent_

---

## QA Results

_To be populated by QA agent_
